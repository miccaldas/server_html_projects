<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>Making Sense of a RSS App</title><link rel="stylesheet" href="/css/normalize.css"><link rel="stylesheet" href="/css/heti.min.css"><link rel="stylesheet" href="/css/hexo-theme-adoubi.css"><link rel="icon" href="/images/favicon.ico"><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="" type="application/atom+xml">
</head><body><div class="header"><a class="github-link" target="_blank" rel="noopener" href="https://notabug.org/micaldas"><img class="github-image" src="/images/Aquicon-Github-small.png"></a><a class="email-link" href="mailto:mclds@protonmail.com"><img class="email-image" src="/images/email-small.png"></a><a class="subscribe-link" href="/atom.xml"><img class="subscribe-image" src="/images/subscribe-small.png"></a></div><div class="content"><div class="post-item"></div><h2 class="post-title-wrapper"><p class="post-title">Making Sense of a RSS App</p></h2><div class="post-date"><time datetime="2021-02-16T02:18:29.000Z">2021-02-16</time></div><div class="post-content"><p>I revisited today the RSS app I changed some months ago. As, unfortunately, I start to expect from myself, nothing was documented, and I had to do some archaeology to understand what was going on.<br>I will immortalize that effort in blog entry form, so as to not disappear into the yawning mouth of time.  </p>
<hr>
<h2><span id="rsspy">rss.py</span></h2><p>This is the main file. For reasons known only to Miguel from the past, this module is not called main.py. Oh well.  </p>
<ol>
<li><p>I imported unicode literals from future to satisfy a need from <a target="_blank" rel="noopener" href="https://questionary.readthedocs.io/en/stable/">questionary</a>, which I also imported. Imported <a target="_blank" rel="noopener" href="https://docs.python.org/3/library/sys.html">sys</a> to create a exit option in the prompt options, and imported all the other modules, one for each functionality,</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> unicode_literals</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> questionary</span><br><span class="line"><span class="keyword">from</span> search_db <span class="keyword">import</span> search</span><br><span class="line"><span class="keyword">from</span> show_rss <span class="keyword">import</span> show_rss</span><br><span class="line"><span class="keyword">from</span> sources_search <span class="keyword">import</span> sources</span><br><span class="line"><span class="keyword">from</span> append_rss <span class="keyword">import</span> append_rss</span><br><span class="line"><span class="keyword">from</span> insert_db <span class="keyword">import</span> delete_old, get_rss</span><br><span class="line"><span class="keyword">from</span> delete_rss <span class="keyword">import</span> read_rss, delete_rss</span><br></pre></td></tr></table></figure></li>
<li><p>created a function to house def rss():</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">rss</span>():</span></span><br><span class="line">    question = questionary.select(</span><br><span class="line">        <span class="string">&#x27;What do you want to do?&#x27;</span>,</span><br><span class="line">        choices=[</span><br><span class="line">                <span class="string">&#x27;See Hacker News&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;See OSNews&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;See Reddit Commandline&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;See Reddit Linux&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;See Reddit Europe&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;See The Geek Stuff&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;See Roots of Progress&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;See Slashdot&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;See Slate Star Codex&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;See Ars Technica&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;See OSTechNix&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;--------------------&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;Add a feed&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;Delete a feed&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;Search the db&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;Refresh db&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;See db&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;--------------------&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;Exit&#x27;</span>,</span><br><span class="line">                ],</span><br><span class="line">    )</span><br><span class="line">    answer = question.ask()</span><br><span class="line">    <span class="built_in">print</span>(answer)</span><br></pre></td></tr></table></figure></li>
<li><p>and connected questions to respective modules.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> answer == <span class="string">&#x27;See Hacker News&#x27;</span>:</span><br><span class="line">    <span class="comment"># 1</span></span><br><span class="line">    sources(<span class="string">&#x27;Hacker News&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> answer == <span class="string">&#x27;See Hackaday&#x27;</span>:</span><br><span class="line">    sources(<span class="string">&#x27;hackaday&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> answer == <span class="string">&#x27;See OSNews&#x27;</span>:</span><br><span class="line">    sources(<span class="string">&#x27;osnews&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> answer == <span class="string">&#x27;See Reddit Commandline&#x27;</span>:</span><br><span class="line">    sources(<span class="string">&#x27;commandline&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> answer == <span class="string">&#x27;See Reddit Linux&#x27;</span>:</span><br><span class="line">    sources(<span class="string">&#x27;linux&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> answer == <span class="string">&#x27;See Reddit Europe&#x27;</span>:</span><br><span class="line">    sources(<span class="string">&#x27;europe&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> answer == <span class="string">&#x27;See Roots of Progress&#x27;</span>:</span><br><span class="line">    sources(<span class="string">&#x27;rootsofprogress&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> answer == <span class="string">&#x27;See Slashdot&#x27;</span>:</span><br><span class="line">    sources(<span class="string">&#x27;slashdot&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> answer == <span class="string">&#x27;See Slate Star Codex&#x27;</span>:</span><br><span class="line">    sources(<span class="string">&#x27;slatestarcodex&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> answer == <span class="string">&#x27;See Ars Technica&#x27;</span>:</span><br><span class="line">    sources(<span class="string">&#x27;arstechnica&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> answer == <span class="string">&#x27;See Slashdot&#x27;</span>:</span><br><span class="line">    sources(<span class="string">&#x27;Slashdot: Linux&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> answer == <span class="string">&quot;See It&#x27;s FOSS&quot;</span>:</span><br><span class="line">    sources(<span class="string">&quot;It&#x27;s FOSS&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> answer == <span class="string">&#x27;See OSTechNix&#x27;</span>:</span><br><span class="line">    sources(<span class="string">&#x27;OSTechnNix&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> answer == (<span class="string">&#x27;Add a feed&#x27;</span>):</span><br><span class="line">    append_rss()</span><br><span class="line"><span class="keyword">if</span> answer == (<span class="string">&#x27;Delete a feed&#x27;</span>):</span><br><span class="line">    read_rss()</span><br><span class="line">    delete_rss()</span><br><span class="line"><span class="keyword">if</span> answer == <span class="string">&#x27;Search the db&#x27;</span>:</span><br><span class="line">    search()</span><br><span class="line"><span class="keyword">if</span> answer == <span class="string">&#x27;Refresh db&#x27;</span>:</span><br><span class="line">    delete_old()</span><br><span class="line">    get_rss()</span><br><span class="line"><span class="keyword">if</span> answer == <span class="string">&#x27;See db&#x27;</span>:</span><br><span class="line">    show_rss()</span><br><span class="line"><span class="keyword">if</span> answer == <span class="string">&#x27;Exit&#x27;</span>:</span><br><span class="line">    sys.exit()</span><br></pre></td></tr></table></figure></li>
<li><p>All the code:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> unicode_literals</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> questionary</span><br><span class="line"><span class="keyword">from</span> search_db <span class="keyword">import</span> search</span><br><span class="line"><span class="keyword">from</span> show_rss <span class="keyword">import</span> show_rss</span><br><span class="line"><span class="keyword">from</span> sources_search <span class="keyword">import</span> sources</span><br><span class="line"><span class="keyword">from</span> append_rss <span class="keyword">import</span> append_rss</span><br><span class="line"><span class="keyword">from</span> insert_db <span class="keyword">import</span> delete_old, get_rss</span><br><span class="line"><span class="keyword">from</span> delete_rss <span class="keyword">import</span> read_rss, delete_rss</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">rss</span>():</span></span><br><span class="line">    question = questionary.select(</span><br><span class="line">        <span class="string">&#x27;What do you want to do?&#x27;</span>,</span><br><span class="line">        choices=[</span><br><span class="line">                <span class="string">&#x27;See Hacker News&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;See OSNews&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;See Reddit Commandline&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;See Reddit Linux&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;See Reddit Europe&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;See The Geek Stuff&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;See Roots of Progress&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;See Slashdot&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;See Slate Star Codex&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;See Ars Technica&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;See OSTechNix&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;--------------------&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;Add a feed&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;Delete a feed&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;Search the db&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;Refresh db&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;See db&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;--------------------&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;Exit&#x27;</span>,</span><br><span class="line">                ],</span><br><span class="line">    )</span><br><span class="line">    answer = question.ask()</span><br><span class="line">    <span class="built_in">print</span>(answer)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> answer == <span class="string">&#x27;See Hacker News&#x27;</span>:</span><br><span class="line">        <span class="comment"># 1</span></span><br><span class="line">        sources(<span class="string">&#x27;Hacker News&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> answer == <span class="string">&#x27;See Hackaday&#x27;</span>:</span><br><span class="line">        sources(<span class="string">&#x27;hackaday&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> answer == <span class="string">&#x27;See OSNews&#x27;</span>:</span><br><span class="line">        sources(<span class="string">&#x27;osnews&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> answer == <span class="string">&#x27;See Reddit Commandline&#x27;</span>:</span><br><span class="line">        sources(<span class="string">&#x27;commandline&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> answer == <span class="string">&#x27;See Reddit Linux&#x27;</span>:</span><br><span class="line">        sources(<span class="string">&#x27;linux&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> answer == <span class="string">&#x27;See Reddit Europe&#x27;</span>:</span><br><span class="line">        sources(<span class="string">&#x27;europe&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> answer == <span class="string">&#x27;See Roots of Progress&#x27;</span>:</span><br><span class="line">        sources(<span class="string">&#x27;rootsofprogress&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> answer == <span class="string">&#x27;See Slashdot&#x27;</span>:</span><br><span class="line">        sources(<span class="string">&#x27;slashdot&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> answer == <span class="string">&#x27;See Slate Star Codex&#x27;</span>:</span><br><span class="line">        sources(<span class="string">&#x27;slatestarcodex&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> answer == <span class="string">&#x27;See Ars Technica&#x27;</span>:</span><br><span class="line">        sources(<span class="string">&#x27;arstechnica&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> answer == <span class="string">&#x27;See Slashdot&#x27;</span>:</span><br><span class="line">        sources(<span class="string">&#x27;Slashdot: Linux&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> answer == <span class="string">&quot;See It&#x27;s FOSS&quot;</span>:</span><br><span class="line">        sources(<span class="string">&quot;It&#x27;s FOSS&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> answer == <span class="string">&#x27;See OSTechNix&#x27;</span>:</span><br><span class="line">        sources(<span class="string">&#x27;OSTechnNix&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> answer == (<span class="string">&#x27;Add a feed&#x27;</span>):</span><br><span class="line">        append_rss()</span><br><span class="line">    <span class="keyword">if</span> answer == (<span class="string">&#x27;Delete a feed&#x27;</span>):</span><br><span class="line">        read_rss()</span><br><span class="line">        delete_rss()</span><br><span class="line">    <span class="keyword">if</span> answer == <span class="string">&#x27;Search the db&#x27;</span>:</span><br><span class="line">        search()</span><br><span class="line">    <span class="keyword">if</span> answer == <span class="string">&#x27;Refresh db&#x27;</span>:</span><br><span class="line">        delete_old()</span><br><span class="line">        get_rss()</span><br><span class="line">    <span class="keyword">if</span> answer == <span class="string">&#x27;See db&#x27;</span>:</span><br><span class="line">        show_rss()</span><br><span class="line">    <span class="keyword">if</span> answer == <span class="string">&#x27;Exit&#x27;</span>:</span><br><span class="line">        sys.exit()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">rss()</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2><span id="sources_searchpy">sources_search.py</span></h2><p>This module pertains to all searches that were generated in the main module.  </p>
<ol>
<li><p>Imported <a target="_blank" rel="noopener" href="https://click.palletsprojects.com/">click</a> and <a target="_blank" rel="noopener" href="https://www.sqlitetutorial.net/sqlite-python/">SQLite</a>. One for beautification, the other to connect to the database. Everything tells me to change this to MySQL but until it breaks, as it most probably will, the code is protected by the ‚Äòif is not broken, don‚Äôt fix it.‚Äô, clause.  </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> click</span><br><span class="line"><span class="keyword">import</span> sqlite3</span><br></pre></td></tr></table></figure></li>
<li><p>Because I needed to create a function attribute to carry the user‚Äôs choice in the last file, I needed to declare it before the beginning of the function. I imagine that this must not be the correct way to do this, but, at the moment, this is all I know. I would change it, but I don‚Äôt even know why or if it‚Äôs wrong.  </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source = <span class="string">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure></li>
<li><p>Getting its query from rss.py, the function calls the db, and asks for rss_fts table, which has free text search enabled.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sources</span>(<span class="params">source</span>):</span></span><br><span class="line">    <span class="keyword">with</span> sqlite3.connect(<span class="string">&#x27;rss.db&#x27;</span>) <span class="keyword">as</span> db:</span><br><span class="line">        cur = db.cursor()</span><br><span class="line">        expression = <span class="string">&#x27;SELECT * FROM rss_fts WHERE rss_fts MATCH ? ORDER BY date DESC&#x27;</span></span><br><span class="line">        cur.execute(expression, (source,))</span><br><span class="line">        record = cur.fetchall()</span><br><span class="line">        <span class="keyword">for</span> row <span class="keyword">in</span> record:</span><br><span class="line">            <span class="built_in">print</span>(click.style(<span class="string">&#x27; ùùµ &#x27;</span>, fg=<span class="string">&#x27;bright_magenta&#x27;</span>, bold=<span class="literal">True</span>),</span><br><span class="line">                  (click.style(<span class="built_in">str</span>(row[<span class="number">1</span>]), fg=<span class="string">&#x27;bright_magenta&#x27;</span>, bold=<span class="literal">True</span>)))</span><br><span class="line">            <span class="built_in">print</span>(click.style(<span class="string">&#x27; ùûá &#x27;</span>, fg=<span class="string">&#x27;bright_magenta&#x27;</span>, bold=<span class="literal">True</span>),</span><br><span class="line">                  (click.style(<span class="built_in">str</span>(row[<span class="number">2</span>]), fg=<span class="string">&#x27;bright_blue&#x27;</span>, bold=<span class="literal">True</span>)))</span><br><span class="line">            <span class="built_in">print</span>(click.style(<span class="string">&#x27; ùùÆ &#x27;</span>, fg=<span class="string">&#x27;bright_magenta&#x27;</span>, bold=<span class="literal">True</span>),</span><br><span class="line">                  (click.style(<span class="built_in">str</span>(row[<span class="number">3</span>]), fg=<span class="string">&#x27;bright_white&#x27;</span>, bold=<span class="literal">True</span>)))</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;\n&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
<li><p>Full code:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;This module pertains to all searches that were generated in the main module&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">import</span> click</span><br><span class="line"><span class="keyword">import</span> sqlite3</span><br><span class="line"></span><br><span class="line">source = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sources</span>(<span class="params">source</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;Getting its query from rss.py, the function calls the db, and asks for rss_fts</span></span><br><span class="line"><span class="string">       table, which has free text search enabled.&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">with</span> sqlite3.connect(<span class="string">&#x27;rss.db&#x27;</span>) <span class="keyword">as</span> db:</span><br><span class="line">        cur = db.cursor()</span><br><span class="line">        expression = <span class="string">&#x27;SELECT * FROM rss_fts WHERE rss_fts MATCH ? ORDER BY date DESC&#x27;</span></span><br><span class="line">        cur.execute(expression, (source,))</span><br><span class="line">        record = cur.fetchall()</span><br><span class="line">        <span class="keyword">for</span> row <span class="keyword">in</span> record:</span><br><span class="line">            <span class="built_in">print</span>(click.style(<span class="string">&#x27; ùùµ &#x27;</span>, fg=<span class="string">&#x27;bright_magenta&#x27;</span>, bold=<span class="literal">True</span>),</span><br><span class="line">                  (click.style(<span class="built_in">str</span>(row[<span class="number">1</span>]), fg=<span class="string">&#x27;bright_magenta&#x27;</span>, bold=<span class="literal">True</span>)))</span><br><span class="line">            <span class="built_in">print</span>(click.style(<span class="string">&#x27; ùûá &#x27;</span>, fg=<span class="string">&#x27;bright_magenta&#x27;</span>, bold=<span class="literal">True</span>),</span><br><span class="line">                  (click.style(<span class="built_in">str</span>(row[<span class="number">2</span>]), fg=<span class="string">&#x27;bright_blue&#x27;</span>, bold=<span class="literal">True</span>)))</span><br><span class="line">            <span class="built_in">print</span>(click.style(<span class="string">&#x27; ùùÆ &#x27;</span>, fg=<span class="string">&#x27;bright_magenta&#x27;</span>, bold=<span class="literal">True</span>),</span><br><span class="line">                  (click.style(<span class="built_in">str</span>(row[<span class="number">3</span>]), fg=<span class="string">&#x27;bright_white&#x27;</span>, bold=<span class="literal">True</span>)))</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    sources(source)</span><br></pre></td></tr></table></figure></li>
</ol>
</div></div><div class="footer"><div class="footer-copyright">Theme By <a target="_blank" rel="noopener" href="https://github.com/shinux/hexo-theme-adoubi">Adoubi</a> , Powered By Hexo.</div></div></body></html>